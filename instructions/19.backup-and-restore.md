# 19. 备份与恢复方案

1. 数据库备份
   - 定期执行 `pg_dump -U replay_user -h postgres replay_db > backup.sql`
   - 使用 `scripts/database/backup_db.sh` 自动化（自定义）
   - 恢复：`psql -U replay_user -h postgres replay_db < backup.sql`
2. 流量文件备份
   - 同步 `backend/data/traffic/` 到对象存储
   - 提供脚本 `scripts/storage/sync_to_s3.sh`
3. 配置备份
   - `.env` / 配置文件存入密码管理工具或 Vault
4. Celery 任务状态
   - 可保存到数据库（`result_backend` 指向 Postgres/Redis）
   - 定期清理旧任务记录
5. 演练
   - 定期在测试环境演练“备份 → 删除 → 恢复”流程，确保可用
