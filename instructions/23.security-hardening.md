# 23. 安全加固清单（未完成部分）

> 本项目尚未实现完整的鉴权/安防功能，以下列出需要逐步完成的工作，按优先级排序。

---

## 1. 身份认证与权限

- [ ] 注册/登录接口，支持密码哈希（BCrypt）  
- [ ] JWT 令牌签发与刷新，配置 `SECRET_KEY`、`ACCESS_TOKEN_EXPIRE_MINUTES`  
- [ ] `get_current_user` 依赖，在受保护的 API 上 `Depends`  
- [ ] 角色权限（普通用户 / 管理员）

---

## 2. 输入与数据安全

- [ ] 流量文件上传前脱敏（手机号、身份证、签名等）  
- [ ] 限制上传类型（仅 json/har）与大小（现已有 50MB 限制）  
- [ ] 任务创建参数校验，防止 SQL/命令注入  
- [ ] 日志中禁止打印敏感字段（Token、密码、请求体中的隐私数据）

---

## 3. 网络与服务安全

- [ ] 部署 HTTPS（Nginx/Ingress + TLS 证书）  
- [ ] CORS 白名单区分开发/生产环境  
- [ ] 启用 Rate Limit / 防爆破策略（Nginx 或 API 中间件）  
- [ ] Redis/Postgres 账号限制远程访问，仅允许内部网络

---

## 4. 运维与审计

- [ ] 针对重要操作（创建任务、上传文件）记录 `user_id`、`ip`  
- [ ] 定期检查依赖漏洞（`pip-audit`、`npm audit`）  
- [ ] 备份及恢复流程进行加密传输（SCP/S3 HTTPS）  
- [ ] 对象存储（若使用）启用服务端加密和访问权限限制

---

## 5. 参考资料

- OWASP Top 10（Web、API）  
- FastAPI 官方安全指南  
- 云厂商安全最佳实践（AWS/GCP/Azure）

当上述任务逐个完成后，请在此文档中标记完成情况，并附上具体实现路径。

