# 15. 日志与错误处理

1. 后端日志
   - 使用 `loguru` 或标准 `logging`，配置 INFO/ERROR 级别
   - 输出到 stdout（Docker 收集）+ 文件 `backend/logs/app.log`
2. 异常处理
   - FastAPI `@app.exception_handler` 捕获自定义异常，返回统一格式
   - Celery 任务中捕获异常并更新任务状态为 `failed`
3. 前端日志
   - 页面错误：`window.onerror` / Vue errorHandler → 上报
   - 请求错误：axios 响应拦截器统一弹出友好提示
4. 日志字段建议
   - trace_id/request_id、user_id、任务ID、接口耗时
5. 清理与归档
   - 日志切割：按日期切割，保留最近 N 天
   - 将日志发送到集中平台（ELK/Loki）便于查询
