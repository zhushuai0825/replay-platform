# 3. 前端脚手架（Vue 3 + Vite）

1. 确认 Node 18+ 可用：`node -v`、`npm -v`
2. 初始化项目
   ```bash
   cd replay-platform/frontend
   npm create vite@latest . -- --template vue
   npm install
   ```
   注意：如果使用 TypeScript，可以使用 `--template vue-ts`，但本文档以 JavaScript 版本为例。
3. 目录结构（示例）
   ```
   frontend/
     src/
       api/index.js
       router/index.js
       views/
         Dashboard.vue
         Tasks.vue
         Traffic.vue
         Environments.vue
       store/
       App.vue
       main.js
   ```
4. 配置 axios 客户端 `src/api/index.js`
   ```javascript
   import axios from 'axios'

   const api = axios.create({
     baseURL: import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000',
     timeout: 30000,
     headers: { 'Content-Type': 'application/json' },
   })

   api.interceptors.request.use((config) => {
     const token = localStorage.getItem('token')
     if (token) config.headers.Authorization = `Bearer ${token}`
     return config
   })

   api.interceptors.response.use(
     (response) => response.data,
     (error) => {
       console.error('API Error:', error.response?.data || error.message)
       return Promise.reject(error)
     }
   )

   export default api
   ```
5. 配置路由 `src/router/index.js`
   ```javascript
   import { createRouter, createWebHistory } from 'vue-router'
   import Dashboard from '@/views/Dashboard.vue'
   import Tasks from '@/views/Tasks.vue'
   import Traffic from '@/views/Traffic.vue'
   import Environments from '@/views/Environments.vue'

   const routes = [
     { path: '/', redirect: '/dashboard' },
     { path: '/dashboard', component: Dashboard },
     { path: '/tasks', component: Tasks },
     { path: '/traffic', component: Traffic },
     { path: '/environments', component: Environments },
   ]

   const router = createRouter({
     history: createWebHistory(),
     routes,
   })

   export default router
   ```
6. `src/main.js`
   ```javascript
   import { createApp } from 'vue'
   import './style.css'
   import App from './App.vue'
   import router from './router'

   const app = createApp(App)
   app.use(router)
   app.mount('#app')
   ```
   注意：`style.css` 是 Vite 模板自带的全局样式文件，需要导入。
7. 创建基础页面骨架（示例 `views/Tasks.vue`）
   ```vue
   <template>
     <div class="tasks">
       <h2>任务管理</h2>
       <p>这里展示任务列表、搜索、筛选等功能。</p>
     </div>
   </template>

   <script setup>
   </script>

   <style scoped>
   .tasks { padding: 20px; }
   </style>
   ```
   其他页面可复制以上模板替换标题与说明。

8. 配置 Vite `vite.config.js`
   为了支持路径别名 `@` 和配置开发服务器，需要创建或更新 `vite.config.js`：
   ```javascript
   import { defineConfig } from 'vite'
   import vue from '@vitejs/plugin-vue'
   import path from 'path'

   export default defineConfig({
     plugins: [vue()],
     resolve: {
       alias: {
         '@': path.resolve(__dirname, './src'),
       },
     },
     server: {
       port: 3000, // 开发服务器端口
       host: 'localhost', // 使用 localhost 避免 Windows 权限问题
       strictPort: false, // 如果端口被占用，自动尝试下一个可用端口
     },
   })
   ```
   注意：
   - 路径别名 `@` 允许使用 `@/views/` 代替 `../views/`
   - 服务器配置可根据需要调整端口和主机

9. 安装依赖
   确保已安装所有必要的依赖：
   ```bash
   npm install axios vue-router
   ```

10. 运行与构建
   ```bash
   npm run dev    # 开发
   npm run build  # 生产构建（产物在 dist/）
   ```
